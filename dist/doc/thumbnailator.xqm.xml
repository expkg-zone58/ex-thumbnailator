<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0">
  <xqdoc:control>
    <xqdoc:date>2017-04-21T14:41:43.648+01:00</xqdoc:date>
    <xqdoc:version>1.1</xqdoc:version>
  </xqdoc:control>
  <xqdoc:module type="library">
    <xqdoc:uri>expkg-zone58:image.thumbnailator</xqdoc:uri>
    <xqdoc:name>thumbnailator.xqm</xqdoc:name>
    <xqdoc:comment>
      <xqdoc:description>Generate image thumbnails using the thumbnailator library.</xqdoc:description>
      <xqdoc:see>https://github.com/coobird/thumbnailator</xqdoc:see>
      <xqdoc:author>andy bunce</xqdoc:author>
      <xqdoc:version>4.4.1</xqdoc:version>
    </xqdoc:comment>
  </xqdoc:module>
  <xqdoc:namespaces>
    <xqdoc:namespace prefix="thumbnails" uri="expkg-zone58:image.thumbnailator"/>
  </xqdoc:namespaces>
  <xqdoc:imports/>
  <xqdoc:variables/>
  <xqdoc:functions>
    <xqdoc:function arity="3">
      <xqdoc:comment>
        <xqdoc:description>generate scaled version of source image with maximum dimension of size</xqdoc:description>
        <xqdoc:param>$source base64Binary (streamed?) e.g from `fetch:binary`</xqdoc:param>
        <xqdoc:custom tag="result">base64Binary for thumbnail</xqdoc:custom>
      </xqdoc:comment>
      <xqdoc:name>thumbnails:size</xqdoc:name>
      <xqdoc:signature>declare function thumbnails:size($source as xs:base64Binary, $width as xs:integer, $height as xs:integer) as xs:base64Binary</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>source</xqdoc:name>
          <xqdoc:type>xs:base64Binary</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>width</xqdoc:name>
          <xqdoc:type>xs:integer</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>height</xqdoc:name>
          <xqdoc:type>xs:integer</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type>xs:base64Binary</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="3">
      <xqdoc:comment>
        <xqdoc:description>generate scaled version of source image at given factors 0-1</xqdoc:description>
        <xqdoc:param>$source base64Binary (streamed?) e.g from `fetch:binary`</xqdoc:param>
        <xqdoc:custom tag="result">base64Binary for thumbnail</xqdoc:custom>
      </xqdoc:comment>
      <xqdoc:name>thumbnails:scale</xqdoc:name>
      <xqdoc:signature>declare function thumbnails:scale($source as xs:base64Binary, $xscale as xs:float, $yscale as xs:float) as xs:base64Binary</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>source</xqdoc:name>
          <xqdoc:type>xs:base64Binary</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>xscale</xqdoc:name>
          <xqdoc:type>xs:float</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>yscale</xqdoc:name>
          <xqdoc:type>xs:float</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type>xs:base64Binary</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="2">
      <xqdoc:comment>
        <xqdoc:description>generate thumbnail using parameters specified via XML</xqdoc:description>
        <xqdoc:param>$source base64Binary (streamed?) e.g from `fetch:binary`</xqdoc:param>
        <xqdoc:param>$task XML parameters &lt;task&gt;&lt;size width="100" ..</xqdoc:param>
        <xqdoc:custom tag="result">base64Binary for thumbnail</xqdoc:custom>
      </xqdoc:comment>
      <xqdoc:name>thumbnails:task</xqdoc:name>
      <xqdoc:signature>declare function thumbnails:task($source as xs:base64Binary, $task as element(task)) as xs:base64Binary</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>source</xqdoc:name>
          <xqdoc:type>xs:base64Binary</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>task</xqdoc:name>
          <xqdoc:type>element(task)</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type>xs:base64Binary</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="1">
      <xqdoc:comment>
        <xqdoc:description>validate task XML against schema</xqdoc:description>
        <xqdoc:param>$src XML parameters &lt;task&gt;&lt;size width="100" ..</xqdoc:param>
        <xqdoc:custom tag="result">validation report</xqdoc:custom>
      </xqdoc:comment>
      <xqdoc:name>thumbnails:validation-report</xqdoc:name>
      <xqdoc:signature>declare function thumbnails:validation-report($src as item()*) as element(report)</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>src</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type>element(report)</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
  </xqdoc:functions>
</xqdoc:xqdoc>